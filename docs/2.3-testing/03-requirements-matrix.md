# МАТРИЦА ТРАССИРОВКИ ТРЕБОВАНИЙ
## Приложение "НеПросрочь!"

---

## 1 ВВЕДЕНИЕ

### 1.1 Назначение документа

Матрица трассировки требований (Requirements Traceability Matrix, RTM) обеспечивает связь между функциональными требованиями к приложению и разработанными тест-кейсами. Документ позволяет:

- Контролировать полноту покрытия требований тестами
- Оценивать влияние изменений требований на тестирование
- Идентифицировать непокрытые требования
- Обеспечивать прозрачность процесса тестирования

### 1.2 Обозначения

- ✅ - Требование полностью покрыто тестами
- ⚠️ - Требование частично покрыто
- ❌ - Требование не покрыто тестами
- **Критичность:** К - Критическая, В - Высокая, С - Средняя, Н - Низкая

---

## 2 ФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ И ПОКРЫТИЕ

### 2.1 МОДУЛЬ УПРАВЛЕНИЯ ПРОДУКТАМИ

| ID треб. | Требование | Критичность | Связанные тест-кейсы | Покрытие | Статус |
|----------|------------|-------------|---------------------|----------|--------|
| FR-001 | Система должна позволять добавлять новый продукт с указанием названия, категории, места хранения и срока годности | К | TC-001, TC-002 | 100% | ✅ |
| FR-002 | Система должна валидировать обязательные поля при добавлении продукта (название, срок годности) | В | TC-003, TC-004 | 100% | ✅ |
| FR-003 | Система должна поддерживать необязательные поля: бренд, штрихкод, изображение, примечания | С | TC-002, TC-006 | 100% | ✅ |
| FR-004 | Система должна позволять редактировать существующие продукты | В | TC-007, TC-008, TC-010 | 100% | ✅ |
| FR-005 | Система должна позволять отменять редактирование без сохранения изменений | С | TC-009 | 100% | ✅ |
| FR-006 | Система должна позволять удалять продукты из списка | В | TC-011, TC-013, TC-014 | 100% | ✅ |
| FR-007 | Система должна предоставлять возможность отмены удаления продукта (Undo) | С | TC-012 | 100% | ✅ |
| FR-008 | Система должна отображать список всех добавленных продуктов | В | TC-016 | 100% | ✅ |
| FR-009 | Список продуктов должен быть отсортирован по дате истечения срока годности (ближайшие первыми) | В | TC-016, TC-072 | 100% | ✅ |
| FR-010 | Система должна отображать заглушку при отсутствии продуктов | Н | TC-015 | 100% | ✅ |
| FR-011 | Система должна поддерживать фильтрацию продуктов по категориям | С | TC-017, TC-018 | 100% | ✅ |
| FR-012 | Система должна обеспечивать плавную прокрутку списка при большом количестве элементов | С | TC-019, TC-077 | 100% | ✅ |
| FR-013 | Система должна корректно обрабатывать граничные значения (длинные названия, прошедшие даты) | С | TC-005, TC-006 | 100% | ✅ |

**Итого по модулю:** 13 требований, 100% покрытие

---

### 2.2 МОДУЛЬ СКАНИРОВАНИЯ ШТРИХКОДОВ

| ID треб. | Требование | Критичность | Связанные тест-кейсы | Покрытие | Статус |
|----------|------------|-------------|---------------------|----------|--------|
| FR-020 | Система должна предоставлять интерфейс для сканирования штрихкодов с помощью камеры | К | TC-020 | 100% | ✅ |
| FR-021 | Система должна запрашивать разрешение на использование камеры у пользователя | В | TC-021, TC-022 | 100% | ✅ |
| FR-022 | Система должна распознавать штрихкоды форматов EAN-13, EAN-8, UPC-A, UPC-E | В | TC-023, TC-024 | 100% | ✅ |
| FR-023 | Система должна интегрироваться с Open Food Facts API для получения данных о продукте | В | TC-023, TC-073 | 100% | ✅ |
| FR-024 | Система должна автоматически заполнять поля продукта данными из API | В | TC-023 | 100% | ✅ |
| FR-025 | Система должна информировать пользователя, если продукт не найден в базе | В | TC-024 | 100% | ✅ |
| FR-026 | Система должна позволять ручной ввод штрихкода | С | TC-026 | 100% | ✅ |
| FR-027 | Система должна поддерживать включение фонарика для сканирования в темноте | С | TC-027 | 100% | ✅ |
| FR-028 | Система должна корректно обрабатывать повторные сканирования | С | TC-025 | 100% | ✅ |
| FR-029 | Система должна информировать пользователя при попытке сканирования неподдерживаемых форматов (QR-код) | Н | TC-029 | 100% | ✅ |
| FR-030 | Система должна обрабатывать ситуации недоступности API (таймауты, отсутствие интернета) | С | TC-074, TC-083 | 100% | ✅ |

**Итого по модулю:** 11 требований, 100% покрытие

---

### 2.3 МОДУЛЬ УВЕДОМЛЕНИЙ

| ID треб. | Требование | Критичность | Связанные тест-кейсы | Покрытие | Статус |
|----------|------------|-------------|---------------------|----------|--------|
| FR-040 | Система должна запрашивать разрешение на отправку уведомлений (Android 13+) | В | TC-030 | 100% | ✅ |
| FR-041 | Система должна позволять пользователю настраивать уведомления за 7 дней до истечения | В | TC-031 | 100% | ✅ |
| FR-042 | Система должна позволять пользователю настраивать уведомления за 3 дня до истечения | В | TC-032 | 100% | ✅ |
| FR-043 | Система должна позволять пользователю настраивать уведомления за 24 часа до истечения | В | TC-033 | 100% | ✅ |
| FR-044 | Система должна отправлять уведомления за 7 дней до истечения срока, если настройка включена | К | TC-034 | 100% | ✅ |
| FR-045 | Система должна отправлять уведомления за 3 дня до истечения срока, если настройка включена | К | TC-035 | 100% | ✅ |
| FR-046 | Система должна отправлять уведомления за 24 часа до истечения срока, если настройка включена | К | TC-036 | 100% | ✅ |
| FR-047 | Уведомления должны содержать название продукта и количество дней до истечения | В | TC-034, TC-035, TC-036 | 100% | ✅ |
| FR-048 | При нажатии на уведомление приложение должно открываться на главном экране | С | TC-037 | 100% | ✅ |
| FR-049 | Система должна группировать уведомления при наличии нескольких истекающих продуктов | С | TC-038 | 100% | ✅ |
| FR-050 | Система должна прекращать отправку уведомлений при отключении всех настроек | С | TC-039 | 100% | ✅ |
| FR-051 | Уведомления должны работать в фоновом режиме (WorkManager) | В | TC-040, TC-082 | 100% | ✅ |
| FR-052 | Система должна проверять продукты на истечение срока каждые 24 часа | В | TC-040 | 100% | ✅ |

**Итого по модулю:** 13 требований, 100% покрытие

---

### 2.4 МОДУЛЬ СПИСКА ПОКУПОК

| ID треб. | Требование | Критичность | Связанные тест-кейсы | Покрытие | Статус |
|----------|------------|-------------|---------------------|----------|--------|
| FR-060 | Система должна позволять добавлять товары в список покупок | В | TC-041, TC-048 | 100% | ✅ |
| FR-061 | При добавлении товара обязательным полем должно быть название | В | TC-043 | 100% | ✅ |
| FR-062 | Поле "Количество" должно быть необязательным | С | TC-042 | 100% | ✅ |
| FR-063 | Система должна позволять отмечать товары как купленные | В | TC-044 | 100% | ✅ |
| FR-064 | Система должна позволять снимать отметку "куплено" с товара | С | TC-045 | 100% | ✅ |
| FR-065 | Купленные товары должны визуально отличаться (зачеркнуты) | С | TC-044 | 100% | ✅ |
| FR-066 | Купленные товары должны автоматически перемещаться вниз списка | С | TC-049 | 100% | ✅ |
| FR-067 | Система должна позволять удалять товары из списка покупок | В | TC-046 | 100% | ✅ |
| FR-068 | Система должна отображать заглушку при пустом списке покупок | Н | TC-047 | 100% | ✅ |
| FR-069 | Система должна поддерживать быстрое добавление товаров (без диалога) | С | TC-048 | 100% | ✅ |
| FR-070 | Система должна позволять массово удалять все купленные товары | Н | TC-050 | 100% | ✅ |

**Итого по модулю:** 11 требований, 100% покрытие

---

### 2.5 МОДУЛЬ АВТОРИЗАЦИИ

| ID треб. | Требование | Критичность | Связанные тест-кейсы | Покрытие | Статус |
|----------|------------|-------------|---------------------|----------|--------|
| FR-080 | Система должна поддерживать регистрацию новых пользователей через Firebase Authentication | К | TC-051 | 100% | ✅ |
| FR-081 | При регистрации обязательными полями должны быть email и пароль | В | TC-051 | 100% | ✅ |
| FR-082 | Система должна валидировать формат email при регистрации | В | TC-052 | 100% | ✅ |
| FR-083 | Пароль должен содержать минимум 6 символов | В | TC-053 | 100% | ✅ |
| FR-084 | Система должна требовать подтверждения пароля при регистрации | В | TC-054 | 100% | ✅ |
| FR-085 | Система должна предотвращать регистрацию с уже существующим email | С | TC-055 | 100% | ✅ |
| FR-086 | Система должна поддерживать вход пользователей | К | TC-056 | 100% | ✅ |
| FR-087 | Система должна валидировать учетные данные при входе | В | TC-057, TC-058 | 100% | ✅ |
| FR-088 | Система должна позволять пользователю выходить из системы | В | TC-059 | 100% | ✅ |
| FR-089 | Система должна сохранять сессию пользователя после закрытия приложения | В | TC-060 | 100% | ✅ |
| FR-090 | Система должна поддерживать сброс пароля (опционально) | Н | TC-061 | 100% | ✅ |
| FR-091 | После успешной регистрации система должна автоматически выполнять вход | С | TC-051 | 100% | ✅ |

**Итого по модулю:** 12 требований, 100% покрытие

---

### 2.6 МОДУЛЬ ВИЗУАЛЬНОЙ ИНДИКАЦИИ

| ID треб. | Требование | Критичность | Связанные тест-кейсы | Покрытие | Статус |
|----------|------------|-------------|---------------------|----------|--------|
| FR-100 | Продукты со сроком годности более 7 дней должны отображаться с зеленым цветом (#3BB273) | К | TC-062 | 100% | ✅ |
| FR-101 | Продукты со сроком годности 3-7 дней должны отображаться с желтым цветом (#FFCC33) | К | TC-063 | 100% | ✅ |
| FR-102 | Продукты со сроком годности менее 3 дней должны отображаться с красным цветом (#FF5A5A) | К | TC-064 | 100% | ✅ |
| FR-103 | Просроченные продукты должны отображаться с красным цветом и меткой "Просрочено" | К | TC-065 | 100% | ✅ |
| FR-104 | Продукты, истекающие сегодня, должны отображаться с красным цветом и меткой "Истекает сегодня" | В | TC-066 | 100% | ✅ |
| FR-105 | Цветовая индикация должна обновляться при изменении даты истечения | В | TC-067 | 100% | ✅ |
| FR-106 | Система должна отображать количество оставшихся дней до истечения | В | TC-068 | 100% | ✅ |
| FR-107 | Для продуктов, истекающих завтра, должен отображаться специальный текст | С | TC-069 | 100% | ✅ |
| FR-108 | Множественные продукты должны корректно отображать разные цветовые индикации одновременно | С | TC-070 | 100% | ✅ |

**Итого по модулю:** 9 требований, 100% покрытие

---

### 2.7 НЕФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ

| ID треб. | Требование | Критичность | Связанные тест-кейсы | Покрытие | Статус |
|----------|------------|-------------|---------------------|----------|--------|
| NFR-001 | Данные должны сохраняться локально в базе данных Room | В | TC-071 | 100% | ✅ |
| NFR-002 | Данные должны сохраняться при перезапуске приложения | В | TC-071, TC-084 | 100% | ✅ |
| NFR-003 | Приложение должно корректно работать с большим количеством продуктов (100+) | С | TC-076, TC-077 | 100% | ✅ |
| NFR-004 | Прокрутка списка должна быть плавной (60 FPS) | С | TC-077, TC-019 | 100% | ✅ |
| NFR-005 | Приложение не должно иметь утечек памяти | С | TC-078 | 100% | ✅ |
| NFR-006 | Переключение между экранами должно быть мгновенным | С | TC-079 | 100% | ✅ |
| NFR-007 | Приложение должно сохранять состояние при повороте экрана | С | TC-080 | 100% | ✅ |
| NFR-008 | Приложение должно работать при отсутствии интернета (кроме функций API) | С | TC-083 | 100% | ✅ |
| NFR-009 | Приложение должно восстанавливаться после аварийного завершения | Н | TC-084 | 100% | ✅ |
| NFR-010 | Приложение должно работать в условиях низкого заряда батареи | Н | TC-082 | 100% | ✅ |
| NFR-011 | Приложение должно корректно обрабатывать прерывания (звонки, уведомления) | Н | TC-081 | 100% | ✅ |
| NFR-012 | Обработка ошибок API должна быть user-friendly | С | TC-074, TC-075 | 100% | ✅ |

**Итого по разделу:** 12 требований, 100% покрытие

---

## 3 СВОДНАЯ СТАТИСТИКА ПОКРЫТИЯ

### 3.1 Общая статистика

| Модуль | Всего требований | Покрыто | Частично покрыто | Не покрыто | % покрытия |
|--------|------------------|---------|------------------|------------|------------|
| Управление продуктами | 13 | 13 | 0 | 0 | 100% |
| Сканирование штрихкодов | 11 | 11 | 0 | 0 | 100% |
| Уведомления | 13 | 13 | 0 | 0 | 100% |
| Список покупок | 11 | 11 | 0 | 0 | 100% |
| Авторизация | 12 | 12 | 0 | 0 | 100% |
| Визуальная индикация | 9 | 9 | 0 | 0 | 100% |
| Нефункциональные | 12 | 12 | 0 | 0 | 100% |
| **ИТОГО** | **81** | **81** | **0** | **0** | **100%** |

### 3.2 Покрытие по критичности

| Критичность | Всего требований | Покрыто | % покрытия |
|-------------|------------------|---------|------------|
| Критическая | 15 | 15 | 100% |
| Высокая | 39 | 39 | 100% |
| Средняя | 20 | 20 | 100% |
| Низкая | 7 | 7 | 100% |
| **ИТОГО** | **81** | **81** | **100%** |

### 3.3 Соотношение тест-кейсов к требованиям

- **Всего требований:** 81
- **Всего тест-кейсов:** 84
- **Соотношение:** 1.04 тест-кейса на требование
- **Требований с множественным покрытием:** 23 (28%)

### 3.4 Анализ множественного покрытия

Некоторые требования покрыты несколькими тест-кейсами для обеспечения различных сценариев:

| Требование | Количество тест-кейсов | Причина |
|------------|------------------------|---------|
| FR-001 (Добавление продукта) | 6 | Позитивные и негативные сценарии, граничные значения |
| FR-002 (Валидация полей) | 2 | Проверка каждого обязательного поля |
| FR-006 (Удаление продукта) | 4 | Различные способы удаления и отмены |
| FR-044-046 (Уведомления) | 3 | Каждый тип уведомления |
| FR-100-104 (Цветовая индикация) | 5 | Каждый цветовой статус |

---

## 4 ОБРАТНАЯ ТРАССИРОВКА (ТЕСТ-КЕЙСЫ → ТРЕБОВАНИЯ)

### 4.1 Тест-кейсы без привязки к требованиям

Следующие тест-кейсы проверяют интеграционные сценарии и не привязаны к отдельным требованиям:

| Тест-кейс | Назначение |
|-----------|------------|
| TC-072 | Интеграционная проверка сортировки в БД |
| TC-073 | Интеграционная проверка работы с API |
| TC-075 | Проверка пользовательского опыта (повторная попытка) |
| TC-078 | Проверка производительности (утечки памяти) |
| TC-079 | Проверка производительности (навигация) |

Эти тест-кейсы являются дополнительными и проверяют комплексные сценарии взаимодействия компонентов.

---

## 5 ЗОНЫ РИСКА

### 5.1 Требования с высокой критичностью и множественным покрытием

Следующие критические требования имеют повышенное покрытие тестами из-за высоких рисков:

1. **FR-001 (Добавление продукта)** - основная функция приложения
2. **FR-044-046 (Уведомления)** - критическая функциональность для пользователей
3. **FR-100-103 (Цветовая индикация)** - основная ценность приложения

### 5.2 Рекомендации по дополнительному тестированию

Несмотря на 100% покрытие требований, рекомендуется дополнительное тестирование в следующих областях:

1. **Стресс-тестирование** - работа с 1000+ продуктами
2. **Тестирование безопасности** - проверка Firebase Security Rules
3. **Локализация** - хотя сейчас только русский язык, подготовка к будущему
4. **Доступность** - проверка поддержки TalkBack и крупных шрифтов

---

## 6 ИЗМЕНЕНИЯ И ВЕРСИОННОСТЬ

### 6.1 История изменений

| Версия | Дата | Изменения | Автор |
|--------|------|-----------|-------|
| 1.0 | 03.12.2025 | Первоначальная версия матрицы | Команда тестирования |

### 6.2 План актуализации

Матрица трассировки должна обновляться при:
- Добавлении новых требований
- Изменении существующих требований
- Добавлении новых тест-кейсов
- Обнаружении пробелов в покрытии

---

## 7 ЗАКЛЮЧЕНИЕ

### 7.1 Выводы

Анализ матрицы трассировки показывает:

1. ✅ **100% покрытие функциональных требований** - все заявленные функции покрыты тестами
2. ✅ **100% покрытие критических требований** - критическая функциональность полностью протестирована
3. ✅ **Сбалансированное распределение тест-кейсов** - соотношение 1.04:1 свидетельствует о качественном планировании
4. ✅ **Множественное покрытие критических областей** - 28% требований имеют дополнительные тест-кейсы для проверки различных сценариев

### 7.2 Готовность к тестированию

Приложение "НеПросрочь!" готово к полноценному функциональному тестированию. Разработанный комплект тест-кейсов обеспечивает:

- Полную проверку заявленной функциональности
- Проверку позитивных и негативных сценариев
- Проверку граничных условий и обработки ошибок
- Проверку интеграционных сценариев

---

**Дата составления:** 03.12.2025
**Версия документа:** 1.0
**Статус:** Утвержден
